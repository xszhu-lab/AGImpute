
# AGImpute
A composite structure model for single-cell RNA-seq imputation
## Tabel of Contents
- [Install AGImpute](#installAGImpute)
- [Install dependences](#installdependences)
- [Input file format](#inputfileformat)
- [Output files](#outputfiles)
- [Run with Testdata](#runwithtestdata)

## <a name="installAGImpute"></a>Install AGImpute
- **Download** We can download the code from github：
```
git clone https://github.com/xszhu-lab/AGImpute.git
cd AGImpute
```
## <a name="installdependences"></a>Install dependences
- **Install** 
AGImpute is implemented in `python`(>3.8) and `pytorch`(>10.1) or `cuda`(11.4),Please install `python`(>3.8) and `pytorch`(>10.1) or cuda dependencies before run AGImpute.Users can either use pre-configured conda environment(recommended)or build your own environmen manually.
 ```
 pip install -r requirements.txt 
 ```

## Commands and options
```
python3 AGImpute.py --help
```
You should see the following output:
```
Usage:AGImpute.py [OPRIONS]

    Options:
    --GPU                       Use GPU for AGImpute.
    --batch_size                Size of the batches.
    --lr                        Adam: learning rate.
    --K                         K parameters,generator random distribution control distribution.
    --channels                  Data iterator channel number parameter.
    --img_size                  Training set size.
    --epochs_a                  Number of epochs of training autoencoder.
    --epochs_g                  Number of epochs of training gan.
    --b1                        Adam: decay of first order momentum of gradient.
    --b2                        Adam: decay of first order momentum of gradient.
    --gamma                     Optimal model distribution calculation:Gamma parameters.
    --D_throd                   Dropout events threshold positioning algorithm confidence value.
    --feature_gene_num          Number selection of Feature Genes
    --dim_thord                 Latent-dim throd of .
    --name                      Name of CSV.
    --file_c                    Path of CSV file.
    --file_model                Path of model file.
    --outdir                    The directory for output.
```

### <a name="inputfileformat"></a>Input file format
Our input requires a `CSV` file, the `index` should be `cell`, and the `column` should be `gene`.

![image](https://github.com/xszhu-lab/AGImpute/blob/main/images/expression%20matrix.png)

### <a name="outputfiles"></a>Output files
We will generate a `GAN_models` file for saving the GAN model under the target path `file_model` and an `Autoencoder_models` file for saving the Autoencoder model and a `CSV file` to save the labels generated by pre-clustering using Leiden.
### <a name="runwithtestdata"></a>Run with Testdata
We can quickly start AGImpute：
```
python AGImpute.py --name sim_counts --file_c ./Testdata/ 
```
